<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PlantCompanion.MainPage"
             Shell.NavBarIsVisible="False"
             BackgroundColor="#FAFCF8">

    <Grid>
        <!-- Premium gradient background with layered design -->
        <BoxView VerticalOptions="Start" 
                 HeightRequest="400"
                 ZIndex="0">
            <BoxView.Background>
                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                    <GradientStop Color="#2A6928" Offset="0.0" />
                    <GradientStop Color="#1E4620" Offset="1.0" />
                </LinearGradientBrush>
            </BoxView.Background>
        </BoxView>
        
        <!-- Decorative pattern overlay -->
        <Grid VerticalOptions="Start" 
              HeightRequest="400" 
              Opacity="0.1"
              ZIndex="0">
            <BoxView>
                <BoxView.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                        <GradientStop Color="#FFFFFF" Offset="0.0" />
                        <GradientStop Color="Transparent" Offset="1.0" />
                    </LinearGradientBrush>
                </BoxView.Background>
            </BoxView>
            <Image Source="leaf_pattern.png" Aspect="AspectFill" Opacity="0.15"/>
        </Grid>
        
        <!-- Dark Overlay - IMPORTANTE: ZIndex maior que o conteúdo principal -->
        <BoxView x:Name="DarkOverlay"
                 Color="#000000"
                 Opacity="0"
                 IsVisible="False"
                 ZIndex="98">
            <BoxView.GestureRecognizers>
                <TapGestureRecognizer Tapped="OnOverlayTapped"/>
            </BoxView.GestureRecognizers>
        </BoxView>
        
        <!-- Menu Hamburger - IMPORTANTE: ZIndex maior que o overlay -->
        <Grid x:Name="HamburgerMenuPanel" 
              WidthRequest="280"
              BackgroundColor="White"
              HorizontalOptions="Start"
              TranslationX="-280"
              ZIndex="99">
            
            <!-- Design do cabeçalho do menu -->
            <Grid RowDefinitions="180, *">
                <!-- Cabeçalho do Menu -->
                <Frame Grid.Row="0" 
                       Padding="0" 
                       HasShadow="False" 
                       IsClippedToBounds="True">
                    <Grid>
                        <BoxView>
                            <BoxView.Background>
                                <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                    <GradientStop Color="#2A6928" Offset="0.0" />
                                    <GradientStop Color="#1E4620" Offset="1.0" />
                                </LinearGradientBrush>
                            </BoxView.Background>
                        </BoxView>
                        
                        <StackLayout Padding="20" VerticalOptions="End">
                            <Image Source="user_icon.png"
                                   HeightRequest="60"
                                   WidthRequest="60"
                                   Aspect="AspectFill"
                                   HorizontalOptions="Start"/>
                            
                            <Label Text="Usuário"
                                   TextColor="White"
                                   FontAttributes="Bold"
                                   FontSize="18"
                                   Margin="0,10,0,0"/>
                            
                            <Label x:Name="UserEmailLabel"
                                   TextColor="#E0F2E9"
                                   FontSize="14"/>
                        </StackLayout>
                    </Grid>
                </Frame>
                
                <!-- Itens do Menu -->
                <StackLayout Grid.Row="1" Spacing="0">
                    <!-- Item do Menu: Home -->
                    <Grid Padding="20,15" BackgroundColor="Transparent">
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnHomeMenuItemTapped"/>
                        </Grid.GestureRecognizers>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <Image Grid.Column="0"
                               Source="home_icon.png"
                               HeightRequest="24"
                               WidthRequest="24"/>
                        
                        <Label Grid.Column="1"
                               Text="Início"
                               FontSize="16"
                               TextColor="#333333"
                               VerticalOptions="Center"/>
                    </Grid>
                    
                    <!-- Separador -->
                    <BoxView HeightRequest="1" Color="#F0F0F0"/>
                    
                    <!-- Item do Menu: Perfil -->
                    <Grid Padding="20,15" BackgroundColor="Transparent">
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnProfileMenuItemTapped"/>
                        </Grid.GestureRecognizers>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <Image Grid.Column="0"
                               Source="profile_icon.png"
                               HeightRequest="24"
                               WidthRequest="24"/>
                        
                        <Label Grid.Column="1"
                               Text="Perfil"
                               FontSize="16"
                               TextColor="#333333"
                               VerticalOptions="Center"/>
                    </Grid>
                    
                    <!-- Separador -->
                    <BoxView HeightRequest="1" Color="#F0F0F0"/>
                    
                    <!-- Item do Menu: Previsão do Tempo -->
                    <Grid Padding="20,15" BackgroundColor="Transparent">
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnWeatherMenuItemTapped"/>
                        </Grid.GestureRecognizers>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <Image Grid.Column="0"
                               Source="weather_icon.png"
                               HeightRequest="24"
                               WidthRequest="24"/>
                        
                        <Label Grid.Column="1"
                               Text="Previsão do Tempo"
                               FontSize="16"
                               TextColor="#333333"
                               VerticalOptions="Center"/>
                    </Grid>
                    
                    <!-- Separador -->
                    <BoxView HeightRequest="1" Color="#F0F0F0"/>
                    
                    <!-- Item do Menu: Histórico -->
                    <Grid Padding="20,15" BackgroundColor="Transparent">
                        <Grid.GestureRecognizers>
                            <TapGestureRecognizer Tapped="OnHistoryMenuItemTapped"/>
                        </Grid.GestureRecognizers>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="30"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <Image Grid.Column="0"
                               Source="history_icon.png"
                               HeightRequest="24"
                               WidthRequest="24"/>
                        
                        <Label Grid.Column="1"
                               Text="Histórico de Plantas"
                               FontSize="16"
                               TextColor="#333333"
                               VerticalOptions="Center"/>
                    </Grid>
                    
                    <!-- Separador -->
                    <BoxView HeightRequest="1" Color="#F0F0F0"/>
                </StackLayout>
            </Grid>
            
            <!-- Sombra para o painel do menu -->
            <BoxView HorizontalOptions="End" 
                     WidthRequest="6" 
                     Opacity="0.2">
                <BoxView.Background>
                    <LinearGradientBrush StartPoint="0,0" EndPoint="1,0">
                        <GradientStop Color="#00000000" Offset="0.0"/>
                        <GradientStop Color="#22000000" Offset="1.0"/>
                    </LinearGradientBrush>
                </BoxView.Background>
            </BoxView>
        </Grid>
        
        <!-- Main Content -->
        <ScrollView ZIndex="1">
            <Grid RowSpacing="0" Padding="0,0,0,100">
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="*" />
                </Grid.RowDefinitions>

                <!-- Premium Header with Hamburger Menu -->
                <Grid Grid.Row="0" Padding="24,50,24,20">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto" />
                        <RowDefinition Height="Auto" />
                    </Grid.RowDefinitions>
                    
                    <!-- Top Bar with Menu and Actions -->
                    <Grid Grid.Row="0" Margin="0,0,0,8">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto" />
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition Width="Auto" />
                        </Grid.ColumnDefinitions>
                        
                        <!-- Hamburger Menu Button -->
                        <Button Grid.Column="0"
                                x:Name="MenuButton"
                                WidthRequest="40"
                                HeightRequest="40"
                                CornerRadius="20"
                                Padding="0"
                                Margin="0,0,0,0"
                                BackgroundColor="#3A7938"
                                BorderColor="Transparent"
                                Clicked="OnMenuButtonClicked">
                            <Button.ImageSource>
                                <FontImageSource FontFamily="MaterialIcons"
                                                 Glyph="&#xe5d2;"
                                                 Size="24"
                                                 Color="White"/>
                            </Button.ImageSource>
                        </Button>
                        
                        <!-- App Name -->
                        <Label Grid.Column="1"
                               Text="PLANT COMPANION" 
                               FontSize="12" 
                               FontAttributes="Bold"
                               TextColor="#9FE3A0"
                               Opacity="0.9"
                               VerticalOptions="Center"
                               HorizontalOptions="Center"
                               CharacterSpacing="1.5" />
                        
                        <!-- Settings Button -->
                        <Button Grid.Column="2"
                                x:Name="SettingsButton"
                                WidthRequest="40"
                                HeightRequest="40"
                                CornerRadius="20"
                                Padding="0"
                                BackgroundColor="#3A7938"
                                BorderColor="Transparent"
                                Clicked="OnSettingsButtonClicked">
                            <Button.ImageSource>
                                <FileImageSource File="settings_icon.png" />
                            </Button.ImageSource>
                        </Button>
                    </Grid>
                           
                    <!-- Title Area -->
                    <StackLayout Grid.Row="1" Orientation="Horizontal" Spacing="8" Margin="0,12,0,0">
                        <Label Text="Plant" 
                               FontSize="38" 
                               FontAttributes="Bold"
                               TextColor="White" />
                        <Label Text="ID" 
                               FontSize="38"
                               FontAttributes="None"
                               TextColor="#9FE3A0" />
                    </StackLayout>
                </Grid>

                <!-- Enhanced Image Card with Floating Design -->
                <Frame Grid.Row="1" 
                       Margin="20,0,20,0" 
                       Padding="0" 
                       CornerRadius="28" 
                       BorderColor="Transparent"
                       HasShadow="False"
                       Background="Transparent"
                       IsClippedToBounds="True">
                    
                    <!-- Enhanced shadow effect for the card -->
                    <Frame.Shadow>
                        <Shadow Brush="#40000000"
                                Offset="0,6"
                                Radius="24" />
                    </Frame.Shadow>
                    
                    <Grid>
                        <!-- Image Display Area -->
                        <Frame BackgroundColor="White" 
                               CornerRadius="28" 
                               HasShadow="False"
                               Padding="0"
                               IsClippedToBounds="True">
                            <Grid>
                                <CarouselView x:Name="ImageCarousel" 
                                              HeightRequest="380"
                                              HorizontalOptions="Fill"
                                              IndicatorView="indicatorView"
                                              PeekAreaInsets="0">
                                    <CarouselView.ItemTemplate>
                                        <DataTemplate>
                                            <Grid>
                                                <Image Source="{Binding}" 
                                                       Aspect="AspectFill"
                                                       HorizontalOptions="FillAndExpand"
                                                       VerticalOptions="FillAndExpand">
                                                    <Image.Clip>
                                                        <RoundRectangleGeometry Rect="0,0,1000,1000" CornerRadius="28" />
                                                    </Image.Clip>
                                                </Image>
                                                <!-- Enhanced gradient overlay for better text contrast -->
                                                <BoxView Opacity="0.15">
                                                    <BoxView.Background>
                                                        <LinearGradientBrush StartPoint="0,0" EndPoint="0,1">
                                                            <GradientStop Color="Transparent" Offset="0.6" />
                                                            <GradientStop Color="#000000" Offset="1.0" />
                                                        </LinearGradientBrush>
                                                    </BoxView.Background>
                                                </BoxView>
                                            </Grid>
                                        </DataTemplate>
                                    </CarouselView.ItemTemplate>
                                </CarouselView>
                                
                                <!-- Enhanced Empty State Design -->
                                <Grid x:Name="EmptyStateGrid"
                                      BackgroundColor="#FAFAFA"
                                      IsVisible="True">
                                    <Grid.Background>
                                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                                            <GradientStop Color="#F6F9F5" Offset="0.0" />
                                            <GradientStop Color="#FFFFFF" Offset="1.0" />
                                        </LinearGradientBrush>
                                    </Grid.Background>
                                    
                                    <StackLayout VerticalOptions="Center" HorizontalOptions="Center" Spacing="24">
                                        <!-- Enhanced decorative leaf graphics -->
                                        <Image Source="plant_icon.png" 
                                               HeightRequest="100" 
                                               HorizontalOptions="Center"
                                               Opacity="0.8">
                                            <!-- Optional subtle rotation animation -->
                                        </Image>
                                        
                                        <StackLayout Spacing="10" Margin="40,0">
                                            <Label Text="Identify Any Plant"
                                                   FontSize="24"
                                                   FontAttributes="Bold"
                                                   TextColor="#315B2F"
                                                   HorizontalOptions="Center" />
                                                   
                                            <Label Text="Take a clear photo or upload an existing image"
                                                   FontSize="16"
                                                   TextColor="#7A8379"
                                                   HorizontalOptions="Center"
                                                   MaxLines="2"
                                                   LineBreakMode="WordWrap"
                                                   HorizontalTextAlignment="Center" />
                                        </StackLayout>
                                    </StackLayout>
                                </Grid>
                                
                                <!-- Enhanced indicator dots -->
                                <IndicatorView x:Name="indicatorView"
                                               VerticalOptions="End"
                                               HorizontalOptions="Center"
                                               Margin="0,0,0,18"
                                               IndicatorSize="9"
                                               IndicatorColor="#30000000"
                                               SelectedIndicatorColor="#FFFFFF" />
                            </Grid>
                        </Frame>
                    </Grid>
                </Frame>

                <!-- Enhanced Results Container with Premium Visual Style -->
                <Frame Grid.Row="2" 
                       Margin="20,24,20,0" 
                       Padding="0" 
                       CornerRadius="28" 
                       BorderColor="Transparent"
                       HasShadow="False"
                       Background="White"
                       IsClippedToBounds="True">
                    
                    <!-- Enhanced shadow effect -->
                    <Frame.Shadow>
                        <Shadow Brush="#15000000"
                                Offset="0,3"
                                Radius="12" />
                    </Frame.Shadow>
                    
                    <Grid Padding="0">
                        <!-- Plant Identification Section -->
                        <Grid Padding="24">
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <!-- Section Header -->
                            <Grid Grid.Row="0">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                
                                <Label Text="IDENTIFICATION" 
                                       FontSize="13" 
                                       FontAttributes="Bold"
                                       TextColor="#5A7854"
                                       CharacterSpacing="0.8"
                                       VerticalOptions="Center" />
                                
                                <Frame Grid.Column="1"
                                       BackgroundColor="#E8F5E9"
                                       CornerRadius="14"
                                       Padding="10,5"
                                       HasShadow="False"
                                       BorderColor="Transparent">
                                    <Label Text="99% Match" 
                                           FontSize="13"
                                           TextColor="#2E7D32"
                                           FontAttributes="Bold" />
                                </Frame>
                            </Grid>
                            
                            <!-- Plant Name (Results) -->
                            <Label Grid.Row="1"
                                   x:Name="ResultLabel" 
                                   Text="Tap the scan button to identify"
                                   FontSize="26" 
                                   FontAttributes="Bold"
                                   TextColor="#253624"
                                   Margin="0,12,0,8"/>
                                   
                            <!-- Scientific Name -->
                            <Label Grid.Row="2"
                                   x:Name="ScientificNameLabel"
                                   Text="Scientific name will appear here"
                                   FontSize="15"
                                   FontAttributes="Italic"
                                   TextColor="#939993"
                                   Margin="0,0,0,20" />
                                   
                            <!-- Enhanced Separator -->
                            <BoxView Grid.Row="3"
                                     HeightRequest="1" 
                                     Color="#F0F5F0" 
                                     Margin="0" />
                        </Grid>
                    </Grid>
                </Frame>
                
                <!-- Enhanced Health Status Card -->
                <Frame Grid.Row="3" 
                       Margin="20,16,20,0" 
                       Padding="0" 
                       CornerRadius="28" 
                       BorderColor="Transparent"
                       HasShadow="False"
                       Background="White"
                       IsClippedToBounds="True">
                    
                    <!-- Enhanced shadow effect -->
                    <Frame.Shadow>
                        <Shadow Brush="#15000000"
                                Offset="0,3"
                                Radius="12" />
                    </Frame.Shadow>
                    
                    <Grid Padding="24">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Section Header -->
                        <Label Grid.Row="0"
                               Text="PLANT HEALTH" 
                               FontSize="13" 
                               FontAttributes="Bold"
                               TextColor="#5A7854"
                               CharacterSpacing="0.8" />
                        
                        <!-- Enhanced Health Status Card -->
                        <Frame Grid.Row="1" 
                               x:Name="HealthStatusFrame"
                               BackgroundColor="#F7FBF7"
                               Padding="18"
                               CornerRadius="18"
                               Margin="0,14,0,0"
                               BorderColor="Transparent"
                               HasShadow="False">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <!-- Enhanced Health Status Icon with Circle Background -->
                                <Frame Grid.Column="0"
                                       HeightRequest="52" 
                                       WidthRequest="52"
                                       CornerRadius="26"
                                       Padding="0"
                                       HasShadow="False"
                                       Background="#E8F5E9"
                                       VerticalOptions="Start"
                                       Margin="0,0,18,0">
                                    <Image x:Name="HealthStatusIcon"
                                           Source="health_unknown.png"
                                           HeightRequest="26"
                                           WidthRequest="26"
                                           HorizontalOptions="Center"
                                           VerticalOptions="Center" />
                                </Frame>
                                
                                <!-- Enhanced Health Status Information -->
                                <StackLayout Grid.Column="1" Spacing="8">
                                    <Label x:Name="HealthStatusTitle"
                                           Text="Analyzing plant health..."
                                           FontSize="18" 
                                           FontAttributes="Bold"
                                           TextColor="#315B2F" />
                                           
                                    <Label x:Name="HealthStatusLabel"
                                           Text="Detailed health information will appear here after analysis"
                                           FontSize="15" 
                                           LineBreakMode="WordWrap"
                                           TextColor="#6B796A" />
                                </StackLayout>
                            </Grid>
                        </Frame>
                        
                        <!-- Disease Details Section with Premium Design -->
                        <StackLayout Grid.Row="2" 
                                     x:Name="DiseaseDetailsStack"
                                     IsVisible="false"
                                     Margin="0,16,0,0"
                                     Spacing="12">
                            <!-- Content will be added dynamically -->
                        </StackLayout>
                    </Grid>
                </Frame>
                
                <!-- Enhanced Care Tips with Premium Design -->
                <Frame Grid.Row="4" 
                       Margin="20,16,20,60" 
                       Padding="0"
                       CornerRadius="28" 
                       BorderColor="Transparent"
                       HasShadow="False"
                       IsClippedToBounds="True">
                    
                    <!-- Enhanced premium gradient background for tips -->
                    <Frame.Background>
                        <LinearGradientBrush StartPoint="0,0" EndPoint="1,1">
                            <GradientStop Color="#EFF6E7" Offset="0.0" />
                            <GradientStop Color="#E7F3DF" Offset="1.0" />
                        </LinearGradientBrush>
                    </Frame.Background>
                    
                    <!-- Enhanced shadow effect -->
                    <Frame.Shadow>
                        <Shadow Brush="#15000000"
                                Offset="0,3"
                                Radius="12" />
                    </Frame.Shadow>
                    
                    <Grid Padding="24">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        
                        <!-- Enhanced Tips Header -->
                        <StackLayout Grid.Row="0" 
                                    Orientation="Horizontal" 
                                    Spacing="14">
                            <!-- Enhanced Tip Icon with Premium Design -->
                            <Frame HeightRequest="46" 
                                  WidthRequest="46"
                                  CornerRadius="23"
                                  Padding="0"
                                  HasShadow="False"
                                  Background="#D6E8C6"
                                  Opacity="0.9">
                                <Image Source="tip_icon.png" 
                                      HeightRequest="24" 
                                      WidthRequest="24"
                                      HorizontalOptions="Center"
                                      VerticalOptions="Center" />
                            </Frame>
                            
                            <Label Text="Expert Tips"
                                  FontSize="19"
                                  FontAttributes="Bold"
                                  TextColor="#315B2F"
                                  VerticalOptions="Center"/>
                        </StackLayout>
                        
                        <!-- Enhanced Tips Content with Enhanced Typography -->
                        <StackLayout Grid.Row="1" 
                                    Spacing="18" 
                                    Margin="0,16,0,0">
                            <!-- Tip Item 1 -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Frame Grid.Column="0"
                                      HeightRequest="30" 
                                      WidthRequest="30"
                                      CornerRadius="15"
                                      HasShadow="False"
                                      BackgroundColor="#FFFFFF"
                                      Opacity="0.7"
                                      VerticalOptions="Start"
                                      Margin="0,0,16,0">
                                    <Label Text="1"
                                          TextColor="#2E7D32"
                                          FontAttributes="Bold"
                                          HorizontalOptions="Center"
                                          VerticalOptions="Center"/>
                                </Frame>
                                
                                <Label Grid.Column="1"
                                      Text="Take photos in natural, diffused light for the most accurate plant identification results."
                                      TextColor="#3A5A40"
                                      FontSize="15"
                                      LineBreakMode="WordWrap" />
                            </Grid>
                            
                            <!-- Tip Item 2 -->
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="Auto"/>
                                    <ColumnDefinition Width="*"/>
                                </Grid.ColumnDefinitions>
                                
                                <Frame Grid.Column="0"
                                      HeightRequest="30" 
                                      WidthRequest="30"
                                      CornerRadius="15"
                                      HasShadow="False"
                                      BackgroundColor="#FFFFFF"
                                      Opacity="0.7"
                                      VerticalOptions="Start"
                                      Margin="0,0,16,0">
                                    <Label Text="2"
                                          TextColor="#2E7D32"
                                          FontAttributes="Bold"
                                          HorizontalOptions="Center"
                                          VerticalOptions="Center"/>
                                </Frame>
                                
                                <Label Grid.Column="1"
                                      Text="Include both leaves and flowers in your photos when available for more accurate identification."
                                      TextColor="#3A5A40"
                                      FontSize="15"
                                      LineBreakMode="WordWrap" />
                            </Grid>
                        </StackLayout>
                    </Grid>
                </Frame>
            </Grid>
        </ScrollView>

        <!-- Enhanced Floating Action Button Group -->
        <Grid VerticalOptions="End" 
              Padding="0,0,0,26" 
              BackgroundColor="Transparent"
              ZIndex="2">
            <Frame HorizontalOptions="Center"
                   VerticalOptions="End"
                   Padding="10,10" 
                   CornerRadius="38" 
                   HasShadow="False"
                   BorderColor="Transparent"
                   BackgroundColor="#FFFFFF">
                
                <!-- Enhanced Button Shadow -->
                <Frame.Shadow>
                    <Shadow Brush="#22000000"
                            Offset="0,8"
                            Radius="16" />
                </Frame.Shadow>
                
                <HorizontalStackLayout Spacing="12">
                    <!-- Enhanced History Button -->
                    <Button x:Name="HistoryButton" 
                            BackgroundColor="#F0F7ED" 
                            WidthRequest="56" 
                            HeightRequest="56" 
                            CornerRadius="28"
                            Clicked="OnHistoricoButtonClicked">
                        <Button.Shadow>
                            <Shadow Brush="#10000000"
                                    Offset="0,2"
                                    Radius="4" />
                        </Button.Shadow>
                        <Button.ImageSource>
                            <FileImageSource File="history_icon.svg" />
                        </Button.ImageSource>
                    </Button>
                    
                    <!-- Enhanced Camera Button -->
                    <Button x:Name="ScanButton"
                            BackgroundColor="White" 
                            WidthRequest="70" 
                            HeightRequest="70" 
                            CornerRadius="35"
                            Clicked="OnTakePhotoButtonClicked">
                        <Button.Shadow>
                            <Shadow Brush="#30000000"
                                    Offset="0,4"
                                    Radius="8" />
                        </Button.Shadow>
                        <Button.ImageSource>
                            <FileImageSource File="scanner_icon.svg" />
                        </Button.ImageSource>
                    </Button>
                    
                    <!-- Enhanced Upload Button -->
                    <Button x:Name="UploadButton"
                            BackgroundColor="#F0F7ED" 
                            WidthRequest="56" 
                            HeightRequest="56" 
                            CornerRadius="28"
                            Clicked="OnUploadButtonClicked">
                        <Button.Shadow>
                            <Shadow Brush="#10000000"
                                    Offset="0,2"
                                    Radius="4" />
                        </Button.Shadow>
                        <Button.ImageSource>
                            <FileImageSource File="upload_icon.svg" />
                        </Button.ImageSource>
                    </Button>
                </HorizontalStackLayout>
            </Frame>
        </Grid>
    </Grid>
</ContentPage>