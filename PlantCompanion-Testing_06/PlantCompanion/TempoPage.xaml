<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="PlantCompanion.TempoPage"
             Title="TempoPage">
    
    <Grid RowDefinitions="Auto,Auto,*,Auto,Auto,Auto" RowSpacing="15">
        <!-- Localização -->
        <StackLayout Grid.Row="0" Margin="20,20,20,0" Orientation="Horizontal" VerticalOptions="Start">
            <Frame Padding="12" CornerRadius="25" HasShadow="True" BorderColor="LightGray" BackgroundColor="White">
                <Label Text="Your location" FontSize="16"/>
                <Frame.GestureRecognizers>
                    <TapGestureRecognizer x:Name="TapLocation" Tapped="TapLocation_Tapped"/>
                </Frame.GestureRecognizers>
            </Frame>
            <ImageButton Source="searchweather.png" HeightRequest="35" WidthRequest="35" HorizontalOptions="EndAndExpand" Clicked="ImageButton_Clicked"/>
        </StackLayout>

        <!-- Cidade e descrição -->
        <StackLayout Grid.Row="1" Orientation="Vertical" HorizontalOptions="Center">
            <Label x:Name="LblCity" FontSize="44" FontAttributes="Bold" TextColor="Gray"/>
            <Label x:Name="LblWeatherDescription" FontSize="18" TextColor="SlateGray"/>
        </StackLayout>

        <!-- Ícone do clima -->
        <Image Grid.Row="2" x:Name="ImgWeatherIcon" VerticalOptions="Center" HeightRequest="220" WidthRequest="220" Margin="0,10"/>
        
        <!-- Informações do clima -->
        <Grid Grid.Row="3" RowDefinitions="Auto" ColumnDefinitions="*,Auto,*" Margin="20,10">
            <StackLayout Grid.Column="0" HorizontalOptions="Center">
                <Image Source="humidity.png" HeightRequest="30"/>
                <Label x:Name="LblHumidity" FontSize="18" HorizontalOptions="Center"/>
            </StackLayout>
            <Label x:Name="LblTemperature" Grid.Column="1" FontSize="55" FontAttributes="Bold" HorizontalOptions="Center"/>
            <StackLayout Grid.Column="2" HorizontalOptions="Center">
                <Image Source="Wind.png" HeightRequest="30"/>
                <Label x:Name="LblWind" FontSize="18" HorizontalOptions="Center"/>
            </StackLayout>
        </Grid>

        <!-- Previsão futura -->
        <CollectionView Grid.Row="4" x:Name="CvWeather" HeightRequest="130" Margin="15">
            <CollectionView.ItemsLayout>
                <LinearItemsLayout Orientation="Horizontal" ItemSpacing="25"/>
            </CollectionView.ItemsLayout>
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid RowDefinitions="Auto,Auto,Auto" Padding="12">
                        <Image Grid.Row="0" HeightRequest="55" WidthRequest="55" Source="{Binding weather[0].customIcon}"/>
                        <Label Grid.Row="1" FontSize="20" Text="{Binding main.temperature}" HorizontalTextAlignment="Center"/>
                        <Label Grid.Row="2" FontSize="16" Text="{Binding dateTime}" HorizontalTextAlignment="Center"/>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>

        <!-- Menu inferior -->
        <Frame Grid.Row="5" Padding="12" BackgroundColor="White" CornerRadius="30" HasShadow="True" Margin="20,15">
            <Grid ColumnDefinitions="*,Auto,*">
                <Button Grid.Column="0" Text="←" FontSize="22" BackgroundColor="#2E7D32" TextColor="White" WidthRequest="55" HeightRequest="55" CornerRadius="27" HorizontalOptions="Center" VerticalOptions="Center" Clicked="OnNavigateToMainPageClicked"/>
                <Button Grid.Column="1" Text="+" FontSize="34" BackgroundColor="#4CAF50" TextColor="White" WidthRequest="75" HeightRequest="75" CornerRadius="37" HorizontalOptions="Center" VerticalOptions="Center" Clicked="OnNavigateToMainPageClicked">
                    <Button.Shadow>
                        <Shadow Brush="#000000" Opacity="0.3" Offset="2,2" Radius="5"/>
                    </Button.Shadow>
                </Button>
                <Button Grid.Column="2" x:Name="UploadButton" Text="→" FontSize="22" BackgroundColor="#2E7D32" TextColor="White" WidthRequest="55" HeightRequest="55" CornerRadius="27" HorizontalOptions="Center" VerticalOptions="Center" Clicked="OnNavigateToMainPageClicked"/>
            </Grid>
        </Frame>
    </Grid>
</ContentPage>
